<?php if (!defined('ABSPATH')) die(); add_thickbox(); $RhinoInstance = new WP_Rhino_Support('WishListMember'); ?><script type="text/javascript">	jQuery(document).ready(function($) {	jQuery("#tabs").tabs();	// Create Short Code	jQuery('#radio1').on('click', function() {		jQuery('#divradio1').slideDown();		jQuery('#divradio2').slideUp();	});	jQuery('#radio2').on('click', function() {		jQuery('#divradio2').slideDown();		jQuery('#divradio1').slideUp();	});	//Selecting posts pages for the scroller tab	jQuery('#radioscroller1').on('click', function() {		jQuery('#divradioscroller2').slideUp();	});	jQuery('#radioscroller2').on('click', function() {		jQuery('#divradioscroller2').slideDown();	});	//for new saving redirection	jQuery('#radiointernal').on('click', function() {		jQuery('#divselectredirection').slideDown();		jQuery("#txtexternal").attr("disabled", "disabled").addClass("disabler_text");	});	jQuery('#radioexternal').on('click', function() {		jQuery('#divselectredirection').slideUp();		jQuery("#txtexternal").removeAttr("disabled").removeClass("disabler_text"); 	});});		function wpm_toggleAllPosts(o){		jQuery('.allposts').prop("checked", o.checked);	}	function wpm_toggleAllPages(o){		jQuery('.allpages').prop("checked", o.checked);	}</script><!-- FOR THE WHOLE SETTINGS PAGE DIV --><div id="bgcl">		<!-------------------------->	<!-- HEADER WITH THE LOGO -->	<!-------------------------->	<div id="header" style="margin-top:-3px;" class="container">		<div class="row">			<div class="three columns left">				<h1>					<a href="http://www.rhinosupport.com/index.php" class="left" title="Helpdesk Ticketing System - Rhino Support">                						<img src="<?php echo $rhino_instance->pluginURL; ?>/images/logo-white-200px.png" width="200" height="57" alt="Help Desk Software - Rhino Support"></a></h1>			</div>			<div class="nine columns">				<ul id="top-menu" class="nav-bar center show-on-desktops">										<li><a href="http://rhinosupport.com/learnmore" class="main scrolling" target="_blank">Learn More</a></li>						<li><a href="https://support.rhinosupport.com/knowledgebase.htm" class="main scrolling" target="_blank">Support</a></li>				</ul>			</div>		</div>	</div>       <div class="row">        <div class="twelve columns">			<div class="panel">								<h1>Settings Page</h1>				<p>Rhino Support Version <?php echo $RhinoInstance->Version; ?></p>				<hr class="seperator">				<!-- ------------------->				<!-- API KEY SECTION --->				<!-- ------------------->				<table border="0" width="100%">					<tr>						<td width="50%">							<h2> Input Your API Key</h2>							<form method="post">								<?php  								if(get_option('wprhinosupport_key') != "") {																		$apifetchresult = $RhinoInstance->IsAPILegit();										if( !$apifetchresult['status'] ) { ?>									<p><font color="red"><?php echo $apifetchresult['reason']; ?></font><br></p>								<?php 									}								}								?>								<input type="text" name="wprhinosupport_key" value="<?php echo get_option('wprhinosupport_key'); ?>" size="54" /><br>									<i><font size="1" color="#111">The API Key for your Rhino Support Account can be obtained by <br>going to your Rhino Accounts Settings Page. </font></i>									<br><br>									<a href="https://www.rhinosupport.com/login.htm" target="_blank">Click here to get your Rhino Support Accounts API Key</a>									<br>									You can use any of the API keys of all your staff.									<br><br>									<a class="thickbox" href="#TB_inline?width=300&height=550&inlineId=divinstructions" >Click here for Instructions on how to get your API Key.</a>								<p class="submit">										<input type="hidden" name="rhinosupportaction" value="saveapikey">									<input type="submit" class="button-primary" value="<?php _e('Save API Key') ?>" />								</p>							</form>						</td>						<td width="50%">							<?php  								if(!$apifetchresult['status']) {									// if no apikey saved then set license status to 0 and last time check to empty									update_option('rhino_license_status', 0);									update_option('rhino_last_license_check', '');							?>									<a href="http://rhinosupport.com/learnmore" class="main scrolling" target="_blank"><img src="<?php echo $rhino_instance->pluginURL; ?>/images/needapi.jpg"></a>								<?php 								}							?>								</td>					</tr>				</table>										<hr class="seperator"><!-- ONLY SHOW THE CONTENTS BELOW IF API IS CORRECT --><?php 	if($apifetchresult['status']) { 		update_option('rhino_license_status', 1);		update_option('rhino_last_license_check', time());?>			<!-- ----------------------------->		<!-- DEPARTMENT ACCESS SECTION --->		<!-- ----------------------------->		<div class="">			<form method="post">				<h2> DEPARTMENT ACCESS</h2>				<p><i>By Default all departments are accessible to non logged in members unless you specify below.</i></p>					<table border="0" width="80%">						<tr>							<td valign="top">								<p><b>Department Access for non logged in users: </b></p>								<select data-placeholder="Select Departments..." multiple="multiple" style="width:200px;padding:0px !important;" class="txtrhinodepts" name="wprhinosupport_non_logged_departments[]" >									<option class="select_all" value="select_all" >Select All</option>                        									<?php 									$rhino_depts = explode(',', get_option( 'wprhinosupport_non_logged_departments'));									$rhino_departments = $RhinoInstance->fetch_data_from_api('Department');									$json_obj = json_decode( $rhino_departments );									foreach ($json_obj as $val):										if(!$val->private):										?>											<option value="<?php echo $val->id; ?>" <?php echo in_array($val->id, (array)$rhino_depts) ? 'selected="selected"' : '' ?> ><?php echo $val->name; ?></option>										<?php 										endif;									endforeach; 									?>								</select>							</td>							<td valign="top">								<p><b>Department Access for logged in users: </b></p>								<select data-placeholder="Select Departments..." multiple="multiple" style="width:200px;padding:0px !important;" class="txtrhinodepts" name="wprhinosupport_logged_departments[]" >									<option class="select_all" value="select_all" >Select All</option>                        									<?php 									$rhino_depts = explode(',', get_option( 'wprhinosupport_logged_departments'));									$json_obj = json_decode( $rhino_departments );									foreach ($json_obj as $val):										if(!$val->private):										?>											<option value="<?php echo $val->id; ?>" <?php echo in_array($val->id, (array)$rhino_depts) ? 'selected="selected"' : '' ?> ><?php echo $val->name; ?></option>										<?php 										endif;									endforeach; 									?>								</select>							</td>						</tr>						<!-- WISHLIST MEMBER Level's department access. --->						<?php						//Check IF Wishlist member is activated						 if (is_plugin_active('wishlist-member/wpm.php')) {													?>						<tr>							<td colspan="2">								<?php								if ( function_exists( 'wlmapi_get_levels' ) ) {									$levels = wlmapi_get_levels();								}								?>								<br>								<p><b>Department Access for logged In members that belongs to a WishList Membership Level:</b> </p>								<table class="widefat" cellpading="0" cellspacing="0" style="margin-top:5px;">									<thead>										<tr>											<th class="theader" width="10%">Membership Levels</th>											<th class="theader" width="10%">Accessible Departments</th>										</tr>									</thead>									<tbody>										<?php										$i = 0;										foreach ($levels['levels']['level'] as $key => $levelval):										?>										<tr>											<td class="trow" valign="middle"> <?php echo $levelval['name']; ?> </td>											<td class="trow" valign="middle">												<?php 													$membersdepartments = maybe_unserialize(get_option( 'wprhinosupport_wlm_members_departments' ));										 																if(!empty($membersdepartments[$levelval['id']]))														$membersdepartmentsimploded = implode(",", $membersdepartments[$levelval['id']]);													else														$membersdepartmentsimploded = '';												?>												<select data-placeholder="Select Departments..." multiple="multiple" style="width:450px;padding:0px !important;" class="txtrhinodepts" name="wprhinosupport_wlm_members[][<?php echo $levelval['id']; ?>]" >													<option class="select_all" value="select_all" >Select All</option>                        													<?php 													 													$rhino_depts = explode(',', $membersdepartmentsimploded);													$json_obj = json_decode( $rhino_departments );													foreach ($json_obj as $val):														if(!$val->private):														?>															<option value="<?php echo $val->id; ?>" <?php echo in_array($val->id, (array)$rhino_depts) ? 'selected="selected"' : '' ?> ><?php echo $val->name; ?></option>														<?php 														endif;													endforeach; 													?>												</select>												<input type="hidden" name="txtiswlmactivated">											</td>										</tr>										<?php										$i++;										endforeach;										?>									</tbody>								</table>							</td>						</tr>						<?php						 }						 ?>					</table>								<p class="submit">						<input type="hidden" name="rhinosupportaction" value="savedepartment">						<input type="submit" class="button-primary" value="<?php _e('Save Departments') ?>" name="cmddepartments" />					</p>			</form>		</div>		<hr  class="seperator">				<!-- --------------------->		<!-- WAYS TO ADD RHINO --->		<!-- --------------------->		<div class="">						<h1>Ways to Add Rhino Support to your Website</h1><br />											<!-- --------------------->			<!-- OPTION 1 SECTION ---->			<!-- --------------------->			<h3><b>Option 1 : </b> Use the WP Rhino Support short codes</h3>			<p><b>[rhinosupport_create]</b> This will add a form on your page/post where your members can create tickets on your rhino supportdesk</p>			<form method="post">						<div style="padding-left: 20px;">				<input type = 'Radio' name ='radiocreate' value= 'custom' id="radio1" <?php echo (get_option('wprhinosupport_create_thankyou') == 'custom') ? 'checked="true"': ''; ?> > Use a custom thank you message. <i>(This message will be displayed after a ticket has been successfully submitted.)</i> <br><br>				<div id="divradio1" <?php echo (get_option('wprhinosupport_create_thankyou') == 'custom') ? '': 'style="display:none;"'; ?> >						<?php 						$args = array(							'textarea_rows' => 15,							'teeny' => true,							'quicktags' => true,							'textarea_name' => 'txtcustommessage',							'media_buttons' => false						);						wp_editor( get_option('wprhinosupport_create_thankyou_value1'), 'editor', $args );						?>						<br>				</div>				<input type = 'Radio' name ='radiocreate' value='redirect' value= 'redirect' id="radio2" <?php echo (get_option('wprhinosupport_create_thankyou') == 'redirect') ? 'checked="true"': ''; ?>> Use a specific thank you page. <i>(Users will be redirected to this location after a ticket has been successfully submitted.)</i>				<br><br> 					<div id="divradio2" style="<?php echo (get_option('wprhinosupport_create_thankyou') == 'redirect') ? '': 'display:none;'; ?> padding-left:20px;">						Redirect to the following location: <b><span id="redirectcreateoption2"> 							<?php 							if(get_option('wprhinosupport_external_internal') == 'internal') {								echo get_the_title( get_option('wprhinosupport_create_thankyou_value2'));							} elseif (get_option('wprhinosupport_external_internal') == 'external') {								echo get_option('wprhinosupport_create_thankyou_value2');							}							?>						</span></b>						<input type="hidden" name="rhinocreateoption2redirect" id="rhinocreateoption2redirect">						<a class="thickbox" href="#TB_inline?width=400&height=300&inlineId=divcreateoption2"> edit </a>					</div>				<br />				<input type="hidden" name="rhinosupportaction" value="savecreateredirect">				<input type="submit" class="button-primary" value="<?php _e('Save Settings','wp-rhino'); ?>" />			</div>			</form>			<p><b>[rhinosupport_listtickets]</b> This will display all tickets created by the user currently logged in.<br><br></p>				<hr class="dashed">						<!-- --------------------->			<!-- OPTION 2 SECTION ---->			<!-- --------------------->			<h3><b>Option 2 : </b> Automatically add a scrolling tab on your pages/posts.</h3>			<form method="post">						<p>The scrolling tab will stay in a fixed position on the left side of the page. See the example below.</p>						<div class="rhinorow">														<div class="rhino-five rhinocolumns rhino-offset-by-one">															<h4>Choose a Color...</h4>									<a href="#" onclick="jQuery('.scrollerColorPicker').miniColors('value', '#E91C21'); changeScrollerImage(); return false;" class="red round labelcircle">&nbsp;</a>									<a href="#" onclick="jQuery('.scrollerColorPicker').miniColors('value', '#FFA500'); changeScrollerImage(); return false;" class="orange round labelcircle">&nbsp;</a>									<a href="#" onclick="jQuery('.scrollerColorPicker').miniColors('value', '#E9E9E9'); changeScrollerImage(); return false;" class="white round labelcircle">&nbsp;</a>									<a href="#" onclick="jQuery('.scrollerColorPicker').miniColors('value', '#7FAE00'); changeScrollerImage(); return false;" class="green round labelcircle">&nbsp;</a>									<a href="#" onclick="jQuery('.scrollerColorPicker').miniColors('value', '#00A6FC'); changeScrollerImage(); return false;" class="blue round labelcircle">&nbsp;</a>									<a href="#" onclick="jQuery('.scrollerColorPicker').miniColors('value', '#141414'); changeScrollerImage(); return false;" class="black round labelcircle">&nbsp;</a>									<input type="text" id="hiddenScrollerColorPicker" name="hiddenScrollerColorPicker" class="scrollerColorPicker" value="<?php echo get_option('wprhinosupport_scroller_color'); ?>"/>																		<br />									<h4>Pixels from top of page...</h4>									<input id="txtPixelOffset" name="txtPixelOffset" type="text" class="input-text small inline" style="width: 50px;" value="<?php echo get_option('wprhinosupport_scroller_pixel'); ?>" /> pixels									<br /><br /><br />																		<table width="80%">										<tr>											<td width="40%">												<a href="#" onclick="jQuery('#divOfflineText').slideUp(); jQuery('#divOnlineText').slideToggle(); return false;">Online Text</a> &nbsp; 												<a class="rhino_tooltip" title="This will be the displayed text on your scrolling tab if your supportdesk settings is Online." href="#"> <img src="<?php echo $RhinoInstance->pluginURL; ?>/images/helpicon.png"> </a>											</td>											<td width="40%">												<a href="#" onclick="jQuery('#divOnlineText').slideUp(); jQuery('#divOfflineText').slideToggle(); return false;">Offline Text</a> &nbsp; 												<a class="rhino_tooltip" title="This will be the displayed text on your scrolling tab if your supportdesk settings is Offline." href="#"> <img src="<?php echo $RhinoInstance->pluginURL; ?>/images/helpicon.png"> </a>																							</td>										</tr>										<tr>											<td>												<div id="divOnlineText" style="display:none; ">													<input class="input-text" id="txtOnlineText" name="txtonline" value="<?php echo get_option('wprhinosupport_scroller_online'); ?>" placeholder="Dissappears when empty" type="text" />												</div>											</td>											<td>												<div id="divOfflineText" style="display:none;">													<input class="input-text" id="txtOfflineText" name="txtoffline" value="<?php echo get_option('wprhinosupport_scroller_offline'); ?>" placeholder="Dissappears when empty" type="text" />												</div>											</td>										</tr>									</table>										</div>							 <div class="rhino-six rhinocolumns" >                                                    </div>                    </div>                    <a href="#" onclick="return false;" class="rhinohostedbutton" id="rhinohostedButton">Contact Us</a>                    <script type='text/javascript'> var rsDomain = '<?php echo $RhinoInstance->get_domain(); ?>'; var rsID = 1374; var rsOffset = 30; var rsColor = '#E3E3E3'; var jq162; function rsLoadScript(url, callback) { var head= document.getElementsByTagName('head')[0]; var script= document.createElement('script'); script.type= 'text/javascript'; script.src= url; if(script.readyState) { script.onreadystatechange = function() { if (script.readyState == 'loaded' || script.readyState == 'complete') { script.onreadystatechange = null; callback(); } }; } else { script.onreadystatechange = callback; script.onload = callback; } head.appendChild(script); } var rsLoadTab = function() { jq162 = $.noConflict(true); jq162.getScript('https://api.rhinosupport.com/contact-support-script.js', function(){ rsSlidePop(); var i,x,y,ARRcookies=document.cookie.split(';'); for (i=0;i<ARRcookies.length;i++) { x=ARRcookies[i].substr(0,ARRcookies[i].indexOf('=')); y=ARRcookies[i].substr(ARRcookies[i].indexOf('=')+1); x=x.replace(/^\s+|\s+$/g,''); if (x=='RSCheckChat') { jq162.getScript('https://api.rhinosupport.com/LoadExistingChat.php?domain='+rsDomain);  } }}); }; </script>                    <a onclick="if (typeof rsScriptLoaded == 'undefined') { rsLoadScript('https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js', rsLoadTab); } else { rsSlidePop(); } return false;" target='_blank' href=''>Preview Example</a>									<h4>Where do you want the scrolling tab to be displayed?</h4>					<input type = 'Radio' name ='radioscroller' value= 'dontdisplay' id="radioscroller0" <?php echo (get_option('wprhinosupport_scroller_tab') == 'dontdisplay') ? 'checked="true"': ''; ?> > Do not Display <br><br>					<input type = 'Radio' name ='radioscroller' value= 'all' id="radioscroller1" <?php echo (get_option('wprhinosupport_scroller_tab') == 'all') ? 'checked="true"': ''; ?> > All sections of the site <br><br>					<input type = 'Radio' name ='radioscroller' value= 'specific' id="radioscroller2" <?php echo (get_option('wprhinosupport_scroller_tab') == 'specific') ? 'checked="true"': ''; ?> > Specific pages or posts <br><br>						<div id="divradioscroller2" <?php echo (get_option('wprhinosupport_scroller_tab') == 'specific') ? '': 'style="display:none;"'; ?>>							<a class="thickbox" href="#TB_inline?width=600&height=550&inlineId=divpostpage">Click here to select Specific Posts/Pages you want the Rhino Support tab to be displayed </a>							</div>					<p class="submit">							<input type="hidden" name="rhinosupportaction" value="savescrollersection" />							<input type="submit" class="button-primary" value="<?php _e('Save Settings','wp-rhino'); ?>" />					</p>				</form>                </div>	<?php } ?>			</div>		</div>	</div></div><!-- ----------------------------------------------------------><!-- INSTRUCTIONS MODAL DIV --><!-- ----------------------------------------------------------><div id="divinstructions" style="display:none;">		<center>			<h1>Instructions on how to get your API KEY.</h1> <br>			<h3> Step 1.  Click on the "Settings" link in the top navigation.</h3><br>			<a href="<?php echo $RhinoInstance->pluginURL; ?>/images/instructions1.png" target="_blank" >				<img src="<?php echo $RhinoInstance->pluginURL; ?>/images/instructions1.png" width="300px"> 			</a><br><br>			<h3> Step 2. Click on the "Click Here to View API Key's" in the right column.</h3><br>			<a href="<?php echo $RhinoInstance->pluginURL; ?>/images/instructions2.png" target="_blank">				<img src="<?php echo $RhinoInstance->pluginURL; ?>/images/instructions2.png" width="300px">			</a><br><br>			<h3> Step 3.  Your API Key will be displayed below.</h3><br>			<a href="<?php echo $RhinoInstance->pluginURL; ?>/images/instructions3.png" target="_blank">				<img src="<?php echo $RhinoInstance->pluginURL; ?>/images/instructions3.png" width="300px"> 			</a><br><br>		</center></div><!-- ----------------------------------------------------------><!-- HIDDEN DIV for Redirection page after submitting ticket --><!-- ----------------------------------------------------------><div id="divcreateoption2" style="display:none;">	<form method="post">			<h3>Select redirection page.</h3>						<h4><input type="radio" name="radioredirection" id="radioexternal" value="external" <?php echo (get_option('wprhinosupport_external_internal') == 'external') ? 'checked="true"': ''; ?>> Specify a URL: </h4>				<input type="text" name="txtexternal" style="width:90%; height:30px;border:inset 1px #EBE9ED; border-right:solid 1px #CCCCCC;border-bottom:solid 1px #CCCCCC;" id="txtexternal" placeholder="External Page URL" value="<?php echo (get_option('wprhinosupport_external_internal')=='external') ? get_option('wprhinosupport_create_thankyou_value2'): ''; ?>" <?php echo (get_option('wprhinosupport_external_internal') == 'external') ? get_option('wprhinosupport_create_thankyou_value2'): 'disabled class="disabler_text"'; ?>>				<br><br>				<div style="height: 1px; background-color: black; text-align: center">				<span style="background-color: white; position: relative; top: -0.7em;">				  or				</span>			</div>			<h4><input type="radio" id ="radiointernal" name="radioredirection" value="internal" <?php echo (get_option('wprhinosupport_external_internal') == 'internal') ? 'checked="true"': ''; ?>> Select existing page: </h4>				<div id="divselectredirection" <?php echo (get_option('wprhinosupport_external_internal') == 'internal') ? '': 'style="display:none;"'; ?>>					<?php $pages = get_pages(); ?>					<select name="txtinternal" id="selectcreateoption2" >						<option value="<?php echo get_option('wprhinosupport_create_thankyou_value2'); ?>"><?php echo get_the_title(get_option('wprhinosupport_create_thankyou_value2')); ?></option>						<?php foreach ($pages AS $page): ?>							<option value="<?php echo $page->ID; ?>"><?php echo $page->post_title ?></option>						<?php endforeach; ?>					</select>				</div>					<p align="right">					<input type="hidden" name="rhinosupportaction" value="saveredirection" />					<input type="submit" class="button-primary" id="buttoncreateoption2" value="Save" size="60">				</p>	</form></div><!-- ----------------------------------------------------------><!-- ---------------HIDDEN TABS FOR PAGE/POSTS  ---------------><!-- ----------------------------------------------------------><div id="divpostpage" style="display:none;">	<form method="post">	<div id="tabs">		<ul>		  <li><a href="#tabs-1">POSTS</a></li>		  <li><a href="#tabs-2">PAGES</a></li>		</ul>		<div id="tabs-1">		  <?php 		  $count_posts = wp_count_posts();		  $published_posts = $count_posts->publish;		  $args = array('posts_per_page'  =>  $published_posts, 'post_type'       => 'post');			  $posts = get_posts( $args ); ?>				<input type="checkbox"  onclick="wpm_toggleAllPosts(this)"> Select All					<ul class="wlm_levels">					<?php 					foreach ($posts AS $post): 					$checked = '';					$supporttabids = explode(',', get_option('wprhinosupport_supporttab_ids'));					if(($key = array_search($post->ID, $supporttabids)) !== false) 						$checked = 'checked ="true"';						?>						<li><label><input class="allposts" type="checkbox" name="chkpostpages[]" value="<?php echo $post->ID ?>" <?php echo $checked; ?> /> <?php echo $post->post_title; ?></label></li>					<?php endforeach; ?>						</ul>		</div>		<div id="tabs-2">		 <?php $pages = get_pages(); ?>				<input type="checkbox" onclick="wpm_toggleAllPages(this)"> Select All					<ul class="wlm_levels">					<?php 					foreach ($pages AS $page): 					$checked = '';					$supporttabids = explode(',', get_option('wprhinosupport_supporttab_ids'));					if(($key = array_search($page->ID, $supporttabids)) !== false) 						$checked = 'checked ="true"';							?>						<li><label><input class="allpages" type="checkbox" name="chkpostpages[]"  value="<?php echo $page->ID ?>" <?php echo $checked; ?> /> <?php echo $page->post_title; ?></label></li>					<?php endforeach; ?>						</ul>		</div>	</div>	<p align="right">		<input type="hidden" name="rhinosupportaction" value="savepostpagecheckbox" />		<input type="submit" class="button-primary" value="Save" size="60">	</p>	</form></div><!-- -------------------------- --><!-- ------MINICOLOR JAVASCRIPT --><!-- -------------------------- --><script type="text/javascript">	jQuery(document).ready(function($) {		jQuery(".scrollerColorPicker").miniColors({	  letterCase: 'uppercase',	  change: function(hex, rgb) {		  changeScrollerImage();	  }  });  $test = jQuery('#hiddenScrollerColorPicker').val();  jQuery(".scrollerColorPicker").miniColors('value', $test);  function changeScrollerImage()  {	  var color = jQuery('#hiddenScrollerColorPicker').val();	  rsColor = color;	  var domain = 'wlptest';	  var onlineText = jQuery('#txtOnlineText').val();	  var offlineText = jQuery('#txtOfflineText').val();	  var linkCode = "<a onclick=\"var nonwin=navigator.appName!='Microsoft Internet Explorer'?'yes':'no'; window.open(this.href,'welcome','location='+nonwin+',scrollbars=yes,width=505,height=560,menubar=no,toolbar=no'); return false;\" style='color:blue;' target='_blank' href='https://"+domain+".rhinosupport.com/contact.php?color="+encodeURIComponent(color)+"'>Contact Us</a>";var scrollerCode = "<script type='text/javascript'> if (typeof rsScriptLoaded == 'undefined') { var rsShowScroller = true; var rsDomain = 'wlptest'; var rsID = 1374; var rsOnlineText = '"+onlineText+"'; var rsOfflineText = '"+offlineText+"'; var rsMasterColor = '"+color+"'; var rsOffset = "+jQuery('#txtPixelOffset').val()+"; var jq162; function rsLoadScript(url, callback) { var head= document.getElementsByTagName('head')[0]; var script= document.createElement('script'); script.type= 'text/javascript'; script.src= url; if(script.readyState) { script.onreadystatechange = function() { if (script.readyState == 'loaded' || script.readyState == 'complete') { script.onreadystatechange = null; callback(); } }; } else { script.onreadystatechange = callback; script.onload = callback; } head.appendChild(script); } var rsLoadTab = function() { jq162 = $.noConflict(true); jq162.getScript('https://s3.amazonaws.com/RSI/contact-support-script.js', function(){var i,x,y,ARRcookies=document.cookie.split(';'); for (i=0;i<ARRcookies.length;i++) { x=ARRcookies[i].substr(0,ARRcookies[i].indexOf('=')); y=ARRcookies[i].substr(ARRcookies[i].indexOf('=')+1); x=x.replace(/^\\s+|\\s+$/g,''); if (x=='RSCheckChat') { jq162.getScript('https://api.rhinosupport.com/LoadExistingChat.php?domain='+rsDomain); } }}); }; rsLoadScript('https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js', rsLoadTab); } <\/script>";             var scrollerCode2 = 'fdaf';jQuery("#txtScrollerCode").val(scrollerCode2);	  jQuery("#txtChatPopup").text(scrollerCode);	  jQuery("#txtLinkCode").text(linkCode);	  var colorInvert = getShadeInvert(color);	  var rgbColors = rsGetRGBColorsFromHex(color);	  var rsColorShade = (rsGetShades(rgbColors[0], rgbColors[1], rgbColors[2], (colorInvert*-14) ));	  var rgbColorsShade = rsGetRGBColorsFromHex(rsColorShade);	  var rsColorShadeTextHover = (rsGetShades(rgbColors[0], rgbColors[1], rgbColors[2], (colorInvert*180) ));	  var rsColorShadeTextShadow = (rsGetShades(rgbColors[0], rgbColors[1], rgbColors[2], (colorInvert*-99) ));	  if(colorInvert < 0 )	  {		  if(colorInvert == -1.5)		  {			  rsColorShadeTextHover = "#FFFFFF";			  rsColorShadeText = "#DEDEDE";		  }		  else		  {			  rsColorShadeTextHover = "#222222";			  rsColorShadeText = "#111111";		  }	  }	  else	  {		  rsColorShadeTextHover = "#FFFFFF";		  rsColorShadeText = "#DEDEDE";	  }	  var style = document.createElement('style');	  style.type = 'text/css';	  style.innerHTML = ".rhinohostedbutton { ";	  style.innerHTML += "color : "+rsColorShadeTextHover+" !important; ";	  style.innerHTML += "background : "+color+"; ";	  style.innerHTML += "background : -moz-linear-gradient(top,  "+color+" 0%, "+color+" 50%, "+rsColorShade+" 51%, "+rsColorShade+" 100%); ";	  //style.innerHTML += "background : -moz-linear-gradient(top,  "+color+" 0%, "+color+" 50%, "+rsColorShade+" 51%, rgba("+rgbColorsShade[0]+", "+rgbColorsShade[1]+", "+rgbColorsShade[2]+", 1) 100%); ";	  style.innerHTML += "background : -webkit-gradient(linear, left top, left bottom, color-stop(0%,"+color+"), color-stop(50%,"+color+"), color-stop(51%,"+rsColorShade+"), color-stop(100%,"+rsColorShade+")); ";	  style.innerHTML += "background : -webkit-linear-gradient(top,  "+color+" 0%,"+color+" 50%,"+rsColorShade+" 51%,"+rsColorShade+" 100%); ";	  style.innerHTML += "background : -o-linear-gradient(top,  "+color+" 0%,"+color+" 50%,"+rsColorShade+" 51%,"+rsColorShade+" 100%); ";	  style.innerHTML += "background : -ms-linear-gradient(top,  "+color+" 0%,"+color+" 50%,"+rsColorShade+" 51%,"+rsColorShade+" 100%); ";	  style.innerHTML += "background : linear-gradient(top,  "+color+" 0%,"+color+" 50%,"+rsColorShade+" 51%,"+rsColorShade+" 100%); ";	  //style.innerHTML += "filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr='#000000FF', EndColorStr='#FF000000'); ";	  style.innerHTML += "}";	  document.getElementsByTagName('head')[0].appendChild(style);              }  changeScrollerImage();  function rsGetRGBColorsFromHex(hex)  {	  var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);	  if(result)	  {		  result[0] = parseInt(result[1], 16);		  result[1] = parseInt(result[2], 16);		  result[2] = parseInt(result[3], 16);	  }	  return result;  }  function rsGetShades(r, g, b, multiplier)  {	  r = r%256;	  g = g%256;	  b = b%256;	  r+=multiplier;	  g+=multiplier;	  b+=multiplier;	  r = r > 255 ? 255 : r;	  g = g > 255 ? 255 : g;	  b = b > 255 ? 255 : b;	  r = r < 0 ? 0 : r;	  g = g < 0 ? 0 : g;	  b = b < 0 ? 0 : b;	  return rgbToHex(r, g, b);  }  function rgbToHex(r, g, b)   {	  var hex = "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);	  return hex.substr(0,7);  }  function getShadeInvert(rsColor)  {	  var rgbColors = rsGetRGBColorsFromHex(rsColor)	  if(rgbColors[0] <= 100 && rgbColors[1] <= 100 && rgbColors[2] <= 100)	  {		  return -1.5;	  }	  else if(rgbColors[0] >= 180 && rgbColors[1] >= 180 && rgbColors[2] >= 180)	  {		  return -.5;	  }	  return 1;  }});</script>